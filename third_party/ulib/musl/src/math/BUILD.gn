source_set("math") {
  configs = []

  # Use relative path to make the build relocatable
  configs += [ "../..:musl_config" ]
  sources = [
    "__expo2.c",
    "__expo2f.c",
    "__fpclassify.c",
    "__fpclassifyf.c",
    "__fpclassifyl.c",
    "__signbit.c",
    "__signbitf.c",
    "__signbitl.c",
    "acosh.c",
    "acoshf.c",
    "acoshl.c",
    "asinh.c",
    "asinhf.c",
    "asinhl.c",
    "atanh.c",
    "atanhf.c",
    "atanhl.c",
    "ceil.c",
    "ceilf.c",
    "copysign.c",
    "copysignf.c",
    "copysignl.c",
    "cosh.c",
    "coshf.c",
    "coshl.c",
    "cosl.c",
    "exp10.c",
    "exp10f.c",
    "exp10l.c",
    "fdim.c",
    "fdimf.c",
    "fdiml.c",
    "finite.c",
    "finitef.c",
    "floor.c",
    "floorf.c",
    "fmax.c",
    "fmaxf.c",
    "fmaxl.c",
    "fmin.c",
    "fminf.c",
    "fminl.c",
    "fmod.c",
    "fmodf.c",
    "frexp.c",
    "frexpf.c",
    "frexpl.c",
    "hypot.c",
    "hypotf.c",
    "hypotl.c",
    "ilogb.c",
    "ilogbf.c",
    "ilogbl.c",
    "ldexp.c",
    "ldexpf.c",
    "ldexpl.c",
    "lgamma.c",
    "lgammaf.c",
    "llround.c",
    "llroundf.c",
    "llroundl.c",
    "logb.c",
    "logbf.c",
    "logbl.c",
    "lround.c",
    "lroundf.c",
    "lroundl.c",
    "modf.c",
    "modff.c",
    "modfl.c",
    "nan.c",
    "nanf.c",
    "nanl.c",
    "nearbyint.c",
    "nearbyintf.c",
    "nearbyintl.c",
    "nextafter.c",
    "nextafterf.c",
    "nextafterl.c",
    "nexttoward.c",
    "nexttowardf.c",
    "nexttowardl.c",
    "remainder.c",
    "remainderf.c",
    "remquo.c",
    "remquof.c",
    "remquol.c",
    "rint.c",
    "rintf.c",
    "round.c",
    "roundf.c",
    "roundl.c",
    "scalbln.c",
    "scalblnf.c",
    "scalblnl.c",
    "scalbn.c",
    "scalbnf.c",
    "scalbnl.c",
    "signgam.c",
    "significand.c",
    "significandf.c",
    "sincosl.c",
    "sinh.c",
    "sinhf.c",
    "sinhl.c",
    "sinl.c",
    "tanh.c",
    "tanhf.c",
    "tanhl.c",
    "tanl.c",
    "tgamma.c",
    "tgammaf.c",
    "trunc.c",
    "truncf.c",
  ]
  if (target_cpu == "arm") {
    sources += [
      "__invtrigl.c",
      "arm/fabs.c",
      "arm/fabsf.c",
      "arm/sqrt.c",
      "arm/sqrtf.c",
      "ceill.c",
      "fabsl.c",
      "floorl.c",
      "fmodl.c",
      "llrint.c",
      "llrintf.c",
      "llrintl.c",
      "lrint.c",
      "lrintf.c",
      "lrintl.c",
      "remainderl.c",
      "rintl.c",
      "sqrtl.c",
      "truncl.c",
    ]
  } else if (target_cpu == "arm64") {
    sources += [
      "__invtrigl.c",
      "aarch64/fabs.s",
      "aarch64/fabsf.s",
      "aarch64/sqrt.s",
      "aarch64/sqrtf.s",
      "ceill.c",
      "fabsl.c",
      "floorl.c",
      "fmodl.c",
      "llrint.c",
      "llrintf.c",
      "llrintl.c",
      "lrint.c",
      "lrintf.c",
      "lrintl.c",
      "remainderl.c",
      "rintl.c",
      "sqrtl.c",
      "truncl.c",
    ]
  } else if (target_cpu == "x64") {
    sources += [
      "x86_64/__invtrigl.s",
      "x86_64/acosl.s",
      "x86_64/asinl.s",
      "x86_64/atan2l.s",
      "x86_64/atanl.s",
      "x86_64/ceill.s",
      "x86_64/exp2l.s",
      "x86_64/expl.s",
      "x86_64/expm1l.s",
      "x86_64/fabs.s",
      "x86_64/fabsf.s",
      "x86_64/fabsl.s",
      "x86_64/floorl.s",
      "x86_64/fmodl.s",
      "x86_64/llrint.s",
      "x86_64/llrintf.s",
      "x86_64/llrintl.s",
      "x86_64/log10l.s",
      "x86_64/log1pl.s",
      "x86_64/log2l.s",
      "x86_64/logl.s",
      "x86_64/lrint.s",
      "x86_64/lrintf.s",
      "x86_64/lrintl.s",
      "x86_64/remainderl.s",
      "x86_64/rintl.s",
      "x86_64/sqrt.s",
      "x86_64/sqrtf.s",
      "x86_64/sqrtl.s",
      "x86_64/truncl.s",
    ]
  } else {
    sources += [
      "__invtrigl.c",
      "ceill.c",
      "fabs.c",
      "fabsf.c",
      "fabsl.c",
      "floorl.c",
      "fmodl.c",
      "llrint.c",
      "llrintf.c",
      "llrintl.c",
      "lrint.c",
      "lrintf.c",
      "lrintl.c",
      "remainderl.c",
      "rintl.c",
      "sqrt.c",
      "sqrtf.c",
      "sqrtl.c",
      "truncl.c",
    ]
  }
}
